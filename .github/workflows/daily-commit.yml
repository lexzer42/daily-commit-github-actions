name: Motivational Quotes
on:
  schedule:
    - cron: '*/5 * * * *'  # Run every 5 minutes

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@v1

    - name: Fetch motivational quote
      run: |
            # Fetch a motivational quote from the API
            quote=$(curl -s https://api.api-ninjas.com/v1/quotes?category=attitude)
            
            # Check if the API response contains valid JSON
            if jq -e . >/dev/null 2>&1 <<<"$quote"; then
                # Extract the quote text from the JSON response
                quote_text=$(echo "$quote" | jq -r '.[0].quote')
                
                # Get the current timestamp
                timestamp=$(date +"%Y-%m-%d %T")
                
                # Define the file path using the secret
                file_path="${{ secrets.GH_PATH }}/quotes.txt"
                
                # Append the quote along with additional details to the quotes.txt file
                echo "Timestamp: $timestamp" >> "$file_path"
                echo "Quote: $quote_text" >> "$file_path"
                echo "" >> "$file_path"
                
                # Configure Git user for the commit
                git config --global user.email "actions@github.com"
                git config --global user.name "GitHub Actions"
                
                # Stage the changes (add quotes.txt)
                git add "$file_path"
                
                # Commit the changes with a descriptive message
                git commit -m "Add new motivational quote: $timestamp"
                
                # Push the changes to the repository
                git push
            else
                echo "Error: Invalid JSON response from the API"
                exit 1
            fi
